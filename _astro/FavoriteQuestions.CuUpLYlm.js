import{v as I,b as O}from"./runtime-dom.esm-bundler.Brv_fg9F.js";import{u as C}from"./useLocalStorage.Hr3vxxp0.js";import{g as M,s as y,f as H}from"./storage.BTi9KS4P.js";/* empty css                           */import{_ as N}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as n,a as t,e as V,t as l,b as p,d as c,w as Q,F as L,r as S,h as u,o as D,k as f,l as g}from"./runtime-core.esm-bundler.BZ9WtKOo.js";const K={__name:"FavoriteQuestions",props:{allQuestions:{type:Array,required:!0}},setup(h,{expose:e}){e();const k=h,{getItem:r,setItem:w}=C(),s=u({}),a=u("all"),x=u("time"),F=u("grid"),m=u(""),j=()=>{s.value=M("favoriteQuestions",{});let o=!1;Object.keys(s.value).forEach(d=>{s.value[d]&&!s.value[d].timestamp&&(s.value[d].timestamp=Date.now(),o=!0)}),o&&y("favoriteQuestions",s.value)};D(()=>{j()});const T=f(()=>{const o=Object.keys(s.value);let d=k.allQuestions.filter(b=>o.includes(b.slug));if(a.value!=="all"&&(d=d.filter(b=>b.data.subject===a.value)),m.value.trim()){const b=m.value.toLowerCase();d=d.filter(i=>i.data.title.toLowerCase().includes(b)||i.data.tags&&i.data.tags.some(v=>v.toLowerCase().includes(b)))}return d.sort((b,i)=>{switch(x.value){case"time":return s.value[i.slug].timestamp-s.value[b.slug].timestamp;case"subject":return b.data.subject.localeCompare(i.data.subject);case"difficulty":const v={easy:1,medium:2,hard:3};return v[b.data.difficulty]-v[i.data.difficulty];default:return 0}}),d}),B=f(()=>Object.values(s.value).filter(o=>o&&o.subject==="subject1").length),z=f(()=>Object.values(s.value).filter(o=>o&&o.subject==="subject4").length),_={props:k,getItem:r,setItem:w,favoriteQuestions:s,selectedSubject:a,sortBy:x,viewMode:F,searchKeyword:m,loadFavoriteQuestions:j,favoriteQuestionsList:T,subject1Count:B,subject4Count:z,removeFavorite:o=>{delete s.value[o],y("favoriteQuestions",s.value)},clearFavorites:(o=null)=>{o?Object.keys(s.value).forEach(d=>{s.value[d]&&s.value[d].subject===o&&delete s.value[d]}):s.value={},y("favoriteQuestions",s.value)},getQuestionTypeText:o=>({single:"单选题",multiple:"多选题",judge:"判断题"})[o]||o,getDifficultyInfo:o=>({easy:{text:"简单",color:"text-green-600",bg:"bg-green-100"},medium:{text:"中等",color:"text-yellow-600",bg:"bg-yellow-100"},hard:{text:"困难",color:"text-red-600",bg:"bg-red-100"}})[o]||{text:o,color:"text-gray-600",bg:"bg-gray-100"},formatFavoriteTime:o=>{if(!o||isNaN(o))return"刚刚收藏";const d=new Date(o);if(isNaN(d.getTime()))return"刚刚收藏";const i=new Date-d;return i<6e4?"刚刚":i<36e5?`${Math.floor(i/6e4)}分钟前`:i<864e5?`${Math.floor(i/36e5)}小时前`:i<6048e5?`${Math.floor(i/864e5)}天前`:d.toLocaleDateString()},ref:u,computed:f,onMounted:D,get useLocalStorage(){return C},get getStorageData(){return M},get setStorageData(){return y},get filterQuestionsBySubject(){return H}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},E={class:"favorite-questions-container"},U={class:"mb-8 bg-pink-500 dark:bg-pink-600 rounded-2xl shadow-lg dark:shadow-pink-900/20 overflow-hidden"},A={class:"flex flex-col md:flex-row items-center p-6 md:p-8"},P={class:"md:w-2/3 text-white mb-6 md:mb-0"},G={class:"flex flex-wrap gap-3 mt-4"},J={class:"bg-white bg-opacity-30 dark:bg-gray-800 dark:bg-opacity-60 rounded-lg px-4 py-2 backdrop-blur-sm border border-white border-opacity-30 dark:border-gray-600"},R={class:"text-2xl font-bold text-pink-800 dark:text-gray-100"},W={class:"bg-white bg-opacity-30 dark:bg-gray-800 dark:bg-opacity-60 rounded-lg px-4 py-2 backdrop-blur-sm border border-white border-opacity-30 dark:border-gray-600"},X={class:"text-2xl font-bold text-pink-800 dark:text-gray-100"},Y={class:"bg-white bg-opacity-30 dark:bg-gray-800 dark:bg-opacity-60 rounded-lg px-4 py-2 backdrop-blur-sm border border-white border-opacity-30 dark:border-gray-600"},Z={class:"text-2xl font-bold text-pink-800 dark:text-gray-100"},q={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg dark:shadow-gray-900/20 border border-gray-100 dark:border-gray-700 p-6 mb-8"},$={class:"flex flex-col lg:flex-row gap-6"},tt={class:"flex-1"},et={class:"flex flex-wrap gap-2"},rt={class:"flex-1"},at={class:"relative"},ot={class:"flex gap-4"},st={class:"flex rounded-lg border border-gray-300 dark:border-gray-600 overflow-hidden"},dt={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-600"},lt={class:"flex flex-wrap gap-3"},it={key:0},nt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},gt={class:"flex items-start justify-between mb-4"},bt={class:"flex items-center space-x-2"},ct=["onClick"],ut=["innerHTML"],xt={class:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4"},vt={class:"flex gap-2"},yt=["href"],ft={key:1,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg dark:shadow-gray-900/20 border border-gray-100 dark:border-gray-700 overflow-hidden"},kt={class:"divide-y divide-gray-100 dark:divide-gray-700"},mt={class:"flex items-center justify-between"},pt={class:"flex-1"},ht={class:"flex items-center space-x-3 mb-2"},wt={class:"text-xs text-gray-500 dark:text-gray-400"},jt=["innerHTML"],_t={class:"text-sm text-gray-500 dark:text-gray-400"},Ct={class:"flex items-center space-x-3 ml-6"},Mt=["href"],Qt=["onClick"],Lt={key:1,class:"text-center py-16"},St={class:"max-w-md mx-auto"},Dt={class:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2"},Ft={class:"text-gray-500 dark:text-gray-400 mb-6"};function Tt(h,e,k,r,w,s){return g(),n("div",E,[t("header",U,[t("div",A,[t("div",P,[e[13]||(e[13]=t("h1",{class:"text-2xl md:text-3xl font-bold mb-3"},"我的收藏",-1)),e[14]||(e[14]=t("p",{class:"text-lg opacity-90 mb-4"},"这里保存了您收藏的重要题目，方便随时复习和巩固。",-1)),t("div",G,[t("div",J,[t("div",R,l(Object.keys(r.favoriteQuestions).length),1),e[10]||(e[10]=t("div",{class:"text-sm text-pink-700 dark:text-gray-200"},"总收藏",-1))]),t("div",W,[t("div",X,l(r.subject1Count),1),e[11]||(e[11]=t("div",{class:"text-sm text-pink-700 dark:text-gray-200"},"科目一",-1))]),t("div",Y,[t("div",Z,l(r.subject4Count),1),e[12]||(e[12]=t("div",{class:"text-sm text-pink-700 dark:text-gray-200"},"科目四",-1))])])]),e[15]||(e[15]=V('<div class="md:w-1/3 flex justify-center" data-v-122daa6b><div class="relative" data-v-122daa6b><div class="w-32 h-32 bg-white bg-opacity-20 rounded-full flex items-center justify-center" data-v-122daa6b><svg class="w-16 h-16 text-pink-800" fill="currentColor" viewBox="0 0 24 24" data-v-122daa6b><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" data-v-122daa6b></path></svg></div><div class="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center" data-v-122daa6b><svg class="w-4 h-4 text-yellow-800" fill="currentColor" viewBox="0 0 20 20" data-v-122daa6b><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" data-v-122daa6b></path></svg></div></div></div>',1))])]),t("div",q,[t("div",$,[t("div",tt,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"科目筛选",-1)),t("div",et,[t("button",{onClick:e[0]||(e[0]=a=>r.selectedSubject="all"),class:c(["px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",r.selectedSubject==="all"?"bg-pink-500 dark:bg-pink-600 text-white shadow-lg dark:shadow-pink-900/20":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])}," 全部 ("+l(Object.keys(r.favoriteQuestions).length)+") ",3),t("button",{onClick:e[1]||(e[1]=a=>r.selectedSubject="subject1"),class:c(["px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",r.selectedSubject==="subject1"?"bg-blue-500 dark:bg-blue-600 text-white shadow-lg dark:shadow-blue-900/20":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])}," 科目一 ("+l(r.subject1Count)+") ",3),t("button",{onClick:e[2]||(e[2]=a=>r.selectedSubject="subject4"),class:c(["px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",r.selectedSubject==="subject4"?"bg-green-500 dark:bg-green-600 text-white shadow-lg dark:shadow-green-900/20":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])}," 科目四 ("+l(r.subject4Count)+") ",3)])]),t("div",rt,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"搜索题目",-1)),t("div",at,[Q(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>r.searchKeyword=a),type:"text",placeholder:"搜索题目标题或标签...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-pink-500 dark:focus:ring-pink-400 focus:border-transparent"},null,512),[[I,r.searchKeyword]]),e[17]||(e[17]=t("svg",{class:"absolute left-3 top-2.5 h-5 w-5 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),t("div",ot,[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"排序",-1)),Q(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>r.sortBy=a),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-pink-500 dark:focus:ring-pink-400 focus:border-transparent"},e[19]||(e[19]=[t("option",{value:"time"},"收藏时间",-1),t("option",{value:"subject"},"科目",-1),t("option",{value:"difficulty"},"难度",-1)]),512),[[O,r.sortBy]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"视图",-1)),t("div",st,[t("button",{onClick:e[5]||(e[5]=a=>r.viewMode="grid"),class:c(["px-3 py-2 text-sm",r.viewMode==="grid"?"bg-pink-500 dark:bg-pink-600 text-white":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"])},e[21]||(e[21]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]),2),t("button",{onClick:e[6]||(e[6]=a=>r.viewMode="list"),class:c(["px-3 py-2 text-sm",r.viewMode==="list"?"bg-pink-500 dark:bg-pink-600 text-white":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"])},e[22]||(e[22]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)]),2)])])])]),Object.keys(r.favoriteQuestions).length>0?(g(),n("div",dt,[t("div",lt,[r.subject1Count>0?(g(),n("button",{key:0,onClick:e[7]||(e[7]=a=>r.clearFavorites("subject1")),class:"px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors duration-200 text-sm font-medium"}," 清空科目一收藏 ")):p("",!0),r.subject4Count>0?(g(),n("button",{key:1,onClick:e[8]||(e[8]=a=>r.clearFavorites("subject4")),class:"px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors duration-200 text-sm font-medium"}," 清空科目四收藏 ")):p("",!0),t("button",{onClick:e[9]||(e[9]=a=>r.clearFavorites()),class:"px-4 py-2 bg-red-500 dark:bg-red-600 text-white rounded-lg hover:bg-red-600 dark:hover:bg-red-700 transition-colors duration-200 text-sm font-medium"}," 清空所有收藏 ")])])):p("",!0)]),r.favoriteQuestionsList.length>0?(g(),n("div",it,[r.viewMode==="grid"?(g(),n("div",nt,[(g(!0),n(L,null,S(r.favoriteQuestionsList,a=>(g(),n("div",{key:a.slug,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg dark:shadow-gray-900/20 border border-gray-100 dark:border-gray-700 p-6 hover:shadow-xl dark:hover:shadow-gray-900/30 transition-all duration-300 transform hover:-translate-y-1"},[t("div",gt,[t("div",bt,[t("span",{class:c(["px-3 py-1 rounded-full text-xs font-medium",a.data.subject==="subject1"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400"])},l(a.data.subject==="subject1"?"科目一":"科目四"),3),t("span",{class:c(["px-3 py-1 rounded-full text-xs font-medium",r.getDifficultyInfo(a.data.difficulty).bg,r.getDifficultyInfo(a.data.difficulty).color])},l(r.getDifficultyInfo(a.data.difficulty).text),3)]),t("button",{onClick:x=>r.removeFavorite(a.slug),class:"text-red-400 dark:text-red-500 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",title:"取消收藏"},e[24]||(e[24]=[t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),8,ct)]),t("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3 line-clamp-2",innerHTML:a.data.title},null,8,ut),t("div",xt,[t("span",null,l(r.getQuestionTypeText(a.data.type)),1),t("span",null,l(r.formatFavoriteTime(r.favoriteQuestions[a.slug]?.timestamp)),1)]),t("div",vt,[t("a",{href:`/${a.data.subject}/question/${a.slug.replace(`${a.data.subject}/`,"")}`,class:"flex-1 bg-pink-500 dark:bg-pink-600 text-white text-center py-2 rounded-lg hover:bg-pink-600 dark:hover:bg-pink-700 transition-all duration-200 text-sm font-medium"}," 开始答题 ",8,yt)])]))),128))])):(g(),n("div",ft,[t("div",kt,[(g(!0),n(L,null,S(r.favoriteQuestionsList,a=>(g(),n("div",{key:a.slug,class:"p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"},[t("div",mt,[t("div",pt,[t("div",ht,[t("span",{class:c(["px-3 py-1 rounded-full text-xs font-medium",a.data.subject==="subject1"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400"])},l(a.data.subject==="subject1"?"科目一":"科目四"),3),t("span",{class:c(["px-3 py-1 rounded-full text-xs font-medium",r.getDifficultyInfo(a.data.difficulty).bg,r.getDifficultyInfo(a.data.difficulty).color])},l(r.getDifficultyInfo(a.data.difficulty).text),3),t("span",wt,l(r.getQuestionTypeText(a.data.type)),1)]),t("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2",innerHTML:a.data.title},null,8,jt),t("div",_t," 收藏于 "+l(r.formatFavoriteTime(r.favoriteQuestions[a.slug]?.timestamp)),1)]),t("div",Ct,[t("a",{href:`/${a.data.subject}/question/${a.slug.replace(`${a.data.subject}/`,"")}`,class:"bg-pink-500 dark:bg-pink-600 text-white px-4 py-2 rounded-lg hover:bg-pink-600 dark:hover:bg-pink-700 transition-all duration-200 text-sm font-medium"}," 开始答题 ",8,Mt),t("button",{onClick:x=>r.removeFavorite(a.slug),class:"text-red-400 dark:text-red-500 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200 p-2",title:"取消收藏"},e[25]||(e[25]=[t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),8,Qt)])])]))),128))])]))])):(g(),n("div",Lt,[t("div",St,[e[26]||(e[26]=t("div",{class:"w-24 h-24 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-6"},[t("svg",{class:"w-12 h-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})])],-1)),t("h3",Dt,l(r.searchKeyword?"没有找到匹配的收藏题目":"还没有收藏任何题目"),1),t("p",Ft,l(r.searchKeyword?"尝试调整搜索关键词或筛选条件":"在答题过程中点击收藏按钮，将重要题目添加到收藏夹"),1),e[27]||(e[27]=t("div",{class:"flex flex-col sm:flex-row gap-3 justify-center"},[t("a",{href:"/subject1",class:"bg-blue-500 dark:bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-600 dark:hover:bg-blue-700 transition-all duration-200 font-medium"}," 去科目一练题 "),t("a",{href:"/subject4",class:"bg-green-500 dark:bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-600 dark:hover:bg-green-700 transition-all duration-200 font-medium"}," 去科目四练题 ")],-1))])]))])}const Pt=N(K,[["render",Tt],["__scopeId","data-v-122daa6b"]]);export{Pt as default};
